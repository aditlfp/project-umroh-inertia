import{W as x,r as c,j as e,y as f}from"./app-7fb21f07.js";import{T as p,I as h}from"./TextInput-017e18f9.js";import{I as u}from"./InputLabel-a94d4e82.js";import{R as j}from"./index.esm-4f1570b3.js";import{Q as d}from"./react-toastify.esm-8b6e2cdf.js";/* empty css                      */import{n as b}from"./no-image-c6047506.js";function R({closeModal:i,datas:s}){const{data:m,setData:n,patch:y,errors:r}=x({id:s.id,name:s.name,img:"",oldimage:s.img}),[g,l]=c.useState();c.useEffect(()=>{async function a(){try{(await fetch(`/storage/images/${s.img}`)).ok?l(`/storage/images/${s.img}`):l(b)}catch(t){console.error("Error fetching image:",t)}}s.img&&a()},[s.img]);const o=async a=>{a.preventDefault();try{f.post(`paket/${m.id}`,{_method:"patch",name:m.name,img:m.img,oldimage:m.oldimage}),d.success("Done"),i()}catch(t){d.error("Telah Terjadi Error"),console.error(t)}};return e.jsxs("div",{children:[e.jsxs("form",{onSubmit:o,className:"mx-5",encType:"multipart/form-data",children:[e.jsx("span",{className:"flex justify-center items-center text-lg font-bold",children:e.jsxs("p",{children:["Edit Paket ",s.name]})}),e.jsxs("div",{className:"my-2 flex flex-col",children:[e.jsx("label",{htmlFor:"img",children:"Upload Gambar"}),!m.img&&m.oldimage==null&&e.jsx("label",{htmlFor:"img",className:"bg-slate-300/70 rounded-lg my-4 drop-shadow-md",children:e.jsxs("span",{className:"flex items-center gap-2 justify-center py-16 font-semibold",children:[e.jsx(j,{className:"font-bold"}),e.jsx("p",{children:"Pilih Gambar"})]})}),e.jsx("input",{type:"file",id:"img",name:"img",onChange:a=>n("img",a.target.files[0]),className:"hidden",accept:"image/*"}),r.img&&e.jsx("span",{className:"text-red-500",children:r.img}),e.jsx("div",{children:e.jsx("label",{htmlFor:"img",className:"flex justify-center items-center rounded-md ",children:e.jsx("img",{src:m.img?URL.createObjectURL(m.img):g,alt:"Image Preview",style:{maxWidth:"160px"},className:"rounded-md drop-shadow-md"})})})]}),e.jsxs("div",{className:"my-2",children:[e.jsx(u,{htmlFor:"name",value:"Nama"}),e.jsx(p,{id:"name",type:"name",name:"name",value:m.name,className:"mt-1 h-10 block w-full border",onChange:a=>n("name",a.target.value)}),e.jsx(h,{message:r.name,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex justify-between mt-5",children:[e.jsx("button",{onClick:i,className:"py-2 px-4 rounded-md bg-[#ce2f2f] text-white font-semibold",children:"Kembali"}),e.jsx("button",{onClick:o,className:"py-2 px-4 rounded-md bg-[#C69749] text-white font-semibold",children:"Submit"})]})]})}export{R as default};
